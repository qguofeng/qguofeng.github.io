---
layout: post
title: "Django系列2——快速在本地搭建一个网页"
date: 2017-02-25  13:00:00
categories: ['Python','Web','Django']
---
```bash
友情提示:
该文章由作者QGUOFENG(http://qiuguofeng.com/)所写
欢迎指出错误一起学习
欢迎大家转载，借鉴，如果标明出处不胜感激
```

本机为ubuntu16.10环境

一、虚拟环境的搭建<br />
1、查看虚拟环境中安装那些版本的python
```bash
QGUOFENG 15:20 test1\$ pyenv versions
* system (set by /home/nborn/.pyenv/version)
  2.7.13
  3.5.0
```
2、新建一个python3.5.0名字为test1的虚拟环境
```bash
QGUOFENG 15:20 test1\$ pyenv virtualenv 3.5.0 test1
```
3、切换到test1环境中去
```bash
QGUOFENG 15:31 test1\$ pyenv activate test1 

切换成功后显示:
(test1) QGUOFENG 15:32 test1\$ 
```
4、确认该环境中的python版本
```bash
(test1) QGUOFENG 15:33 test1\$ python
Python 3.5.0 (default, Feb 22 2017, 22:15:53)
```
5、更新pip到最新版本
```bash
(test1) QGUOFENG 15:35 test1\$ pip install --upgrade pip
```
6、安装django
```bash
(test1) QGUOFENG 15:35 test1\$ python -m pip install django
```
7、安装mysql数据库依赖模板
```bash
(test1) QGUOFENG 15:35 test1\$ python -m pip install pymysql
```

二、开始搭建一个简易的网页
1、新建一个django项目My_first_blog
```bash
(test1) QGUOFENG 15:38 test1\$ django-admin startproject My_first_blog
```
2、新建一个django app(先切换到项目目录中)
```bash
(test1) QGUOFENG 16:06 test1\$ cd My_first_blog/
(test1) QGUOFENG 15:43 test1\$ django-admin startapp blog
```
3、在app(blog)中增加一个文件templates(setting.py配置文件默认的模板文件目录为app下的templates文件目录)
```bash
(test1) QGUOFENG 16:11 My_first_blog\$ cd blog/
(test1) QGUOFENG 16:11 blog\$ mkdir templates
```
4、在templates中写入一个测试的html文件
```bash
(test1) QGUOFENG 16:17 blog\$ echo "test" >> templates/test.html
```
5、在views.py中定一个业务请求处理的函数来处理test.html
```bash
(test1) QGUOFENG 16:19 blog\$ vi views.py
-------------------------------------------
from django.shortcuts import render

# Create your views here.
def test(request):
    return render(request,'test.html')
-------------------------------------------
```
6、在url.py中定义一条路由让test.html能够被访问
```bash
(test1) QGUOFENG 16:22 blog\$ vi ../My_first_blog/urls.py
---------------------------------------------------------------
from django.conf.urls import url
from django.contrib import admin
from blog import views				#从blog app中引入views.py

urlpatterns = [
    url(r'^admin/', admin.site.urls),
    url(r'^test/', views.test,name="test"),	#增加的测试路由
]
----------------------------------------------------------------
```
7、查看setting.py文件是否有引入blog这个app
```bash

---------------------------------------------------------------
# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'blog',			#如果出现说明已经将该app导入，否则自行添加一个条记录
]

--------------------------------------------------------------
```
8、生成数据库同步脚本，并同步数据库
```bash
(test1) QGUOFENG 16:34 My_first_blog\$ python manage.py makemigrations
(test1) QGUOFENG 16:34 My_first_blog\$ python manage.py migrate
```
9、测试网页是否可以访问
```bash
(test1) QGUOFENG 16:35 My_first_blog\$ python manage.py runserver 8080
Performing system checks...

System check identified no issues (0 silenced).
February 25, 2017 - 08:36:27
Django version 1.10.5, using settings 'My_first_blog.settings'
Starting development server at http://127.0.0.1:8080/
Quit the server with CONTROL-C.
```
![test](/assets/active_images/Django/Django2/1.png)

成功！！！<br />
该网站的大体目录结构
```bash
├── blog
│   ├── admin.py		#admin配置
│   ├── apps.py			#app配置
│   ├── __init__.py
│   ├── migrations		#数据库同步脚本目录
│   ├── models.py		#模板代码
│   ├── templates		#网页模板目录
│   │   └── test.html
│   ├── tests.py		#单元测试
│   └── views.py		#视图代码
├── db.sqlite3			#数据库文件
├── manage.py			#命令行工具脚本
└── My_first_blog
    ├── __init__.py
    ├── settings.py		#项目配置文件
    ├── urls.py			#URL配置
    └── wsgi.py			#wsgi配置

```
