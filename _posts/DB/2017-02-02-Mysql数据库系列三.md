---
layout: post
title:  "Mysql数据库系列三"
crawlertitle: "Mysql数据库系列三"
summary: "Mysql数据库系列三"
date:   2016-09-14 23:09:47 +0700
categories: posts
tags: ['数据库','Mysql','全部文章']
author: QGUOFENG
---

```bash
#创建用户表
mysql> CREATE TABLE IF NOT EXISTS user10(
    -> id SMALLINT UNSIGNED KEY AUTO_INCREMENT,
    -> username VARCHAR(20) NOT NULL UNIQUE,
    -> password CHAR(32) NOT NULL,
    -> email VARCHAR(50) NOT NULL DEFAULT '382771934@qq.com',
    -> age TINYINT UNSIGNED DEFAULT 19,
    -> sex ENUM('男','女','保密') DEFAULT '保密',
    -> addr VARCHAR(200) NOT NULL DEFAULT '北京',
    -> salary FLOAT(6.2),
    -> regTime INT UNSIGNED,
    -> FACE CHAR(100) NOT NULL DEFAULT 'defalut.jpg'
    -> );
Query OK, 0 rows affected (0.41 sec)

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| password | char(32)                   | NO   |     | NULL             |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
+----------+----------------------------+------+-----+------------------+----------------+
10 rows in set (0.00 sec)

#修改数据库的名称
mysql> ALTER TABLE user10 RENAME TO user11;
Query OK, 0 rows affected (0.15 sec)

mysql> ALTER TABLE user11 RENAME AS user10;
Query OK, 0 rows affected (0.14 sec)

mysql> ALTER TABLE user10 RENAME user11;
Query OK, 0 rows affected (0.14 sec)

mysql> RENAME TABLE user11 TO user10;
Query OK, 0 rows affected (0.13 sec)

#增加字段
mysql> ALTER TABLE user10 ADD card CHAR(18);
Query OK, 0 rows affected (0.62 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE user10 ADD test1 VARCHAR(100) NOT NULL UNIQUE;
Query OK, 0 rows affected (0.60 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| password | char(32)                   | NO   |     | NULL             |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
| card     | char(18)                   | YES  |     | NULL             |                |
| test1    | varchar(100)               | NO   | UNI | NULL             |                |
+----------+----------------------------+------+-----+------------------+----------------+
12 rows in set (0.00 sec)

mysql> ALTER TABLE user10 ADD test2 VARCHAR(20) NOT NULL FIRST;
Query OK, 0 rows affected (0.61 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| test2    | varchar(20)                | NO   |     | NULL             |                |
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| password | char(32)                   | NO   |     | NULL             |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
| card     | char(18)                   | YES  |     | NULL             |                |
| test1    | varchar(100)               | NO   | UNI | NULL             |                |
+----------+----------------------------+------+-----+------------------+----------------+
13 rows in set (0.00 sec)

mysql> ALTER TABLE user10 ADD test3 INT NOT NULL DEFAULT 100 AFTER username;
Query OK, 0 rows affected (0.65 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| test2    | varchar(20)                | NO   |     | NULL             |                |
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| test3    | int(11)                    | NO   |     | 100              |                |
| password | char(32)                   | NO   |     | NULL             |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
| card     | char(18)                   | YES  |     | NULL             |                |
| test1    | varchar(100)               | NO   | UNI | NULL             |                |
+----------+----------------------------+------+-----+------------------+----------------+
14 rows in set (0.00 sec)

#选中一次表，完成多个操作
mysql> -- 选中一次表，完成多个操作
mysql> ALTER TABLE user10
    -> ADD test4 INT NOT NULL DEFAULT 123 AFTER password, 
    -> ADD test5 FLOAT(6,2) FIRST,
    -> ADD test6 SET('A','B','C');
Query OK, 0 rows affected (0.60 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| test5    | float(6,2)                 | YES  |     | NULL             |                |
| test2    | varchar(20)                | NO   |     | NULL             |                |
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| test3    | int(11)                    | NO   |     | 100              |                |
| password | char(32)                   | NO   |     | NULL             |                |
| test4    | int(11)                    | NO   |     | 123              |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
| card     | char(18)                   | YES  |     | NULL             |                |
| test1    | varchar(100)               | NO   | UNI | NULL             |                |
| test6    | set('A','B','C')           | YES  |     | NULL             |                |
+----------+----------------------------+------+-----+------------------+----------------+
17 rows in set (0.00 sec)

#删除字段
mysql> -- 删除字段

mysql> ALTER TABLE user10 DROP test6;
Query OK, 0 rows affected (0.68 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| test5    | float(6,2)                 | YES  |     | NULL             |                |
| test2    | varchar(20)                | NO   |     | NULL             |                |
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| test3    | int(11)                    | NO   |     | 100              |                |
| password | char(32)                   | NO   |     | NULL             |                |
| test4    | int(11)                    | NO   |     | 123              |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
| card     | char(18)                   | YES  |     | NULL             |                |
| test1    | varchar(100)               | NO   | UNI | NULL             |                |
+----------+----------------------------+------+-----+------------------+----------------+
16 rows in set (0.00 sec)

#一次删除多个字段
mysql> -- 一次删除多个字段

mysql> ALTER TABLE user10
    -> DROP test1,
    -> DROP test2,
    -> DROP test3,
    -> DROP test4,
    -> DROP test5;
Query OK, 0 rows affected (0.58 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| password | char(32)                   | NO   |     | NULL             |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
| card     | char(18)                   | YES  |     | NULL             |                |
+----------+----------------------------+------+-----+------------------+----------------+
11 rows in set (0.00 sec)

mysql> DESC user10;
+----------+----------------------------+------+-----+------------------+----------------+
| Field    | Type                       | Null | Key | Default          | Extra          |
+----------+----------------------------+------+-----+------------------+----------------+
| id       | smallint(5) unsigned       | NO   | PRI | NULL             | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL             |                |
| password | char(32)                   | NO   |     | NULL             |                |
| email    | varchar(50)                | NO   |     | 382771934@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19               |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密             |                |
| addr     | varchar(200)               | NO   |     | 北京             |                |
| salary   | float                      | YES  |     | NULL             |                |
| regTime  | int(10) unsigned           | YES  |     | NULL             |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg      |                |
| card     | char(18)                   | YES  |     | NULL             |                |
+----------+----------------------------+------+-----+------------------+----------------+
11 rows in set (0.00 sec)

#修改字段
mysql> ALTER TABLE user10 MODIFY email VARCHAR(200) NOT NULL DEFAULT '222222222222@qq.com';
Query OK, 0 rows affected (0.78 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC user10;
+----------+----------------------------+------+-----+---------------------+----------------+
| Field    | Type                       | Null | Key | Default             | Extra          |
+----------+----------------------------+------+-----+---------------------+----------------+
| id       | smallint(5) unsigned       | NO   | PRI | NULL                | auto_increment |
| username | varchar(20)                | NO   | UNI | NULL                |                |
| password | char(32)                   | NO   |     | NULL                |                |
| email    | varchar(200)               | NO   |     | 222222222222@qq.com |                |
| age      | tinyint(3) unsigned        | YES  |     | 19                  |                |
| sex      | enum('男','女','保密')     | YES  |     | 保密                |                |
| addr     | varchar(200)               | NO   |     | 北京                |                |
| salary   | float                      | YES  |     | NULL                |                |
| regTime  | int(10) unsigned           | YES  |     | NULL                |                |
| FACE     | char(100)                  | NO   |     | defalut.jpg         |                |
| card     | char(18)                   | YES  |     | NULL                |                |
+----------+----------------------------+------+-----+---------------------+----------------+
11 rows in set (0.00 sec)

#更改字段同时更改字段的名称
mysql> ALTER TABLE user10 CHANGE test test1 char(32) NOT NULL DEFAULT '123';
Query OK, 0 rows affected (0.85 sec)
Records: 0  Duplicates: 0  Warnings: 0
#########################################################################################3

#为字段增加默认值
mysql>  -- 为字段增加默认值

mysql> CREATE TABLE IF NOT EXISTS test12(
    -> id TINYINT UNSIGNED KEY AUTO_INCREMENT,
    -> username VARCHAR(20) NOT NULL UNIQUE,
    -> age TINYINT UNSIGNED
    -> );
Query OK, 0 rows affected (0.42 sec)

mysql> DESC test12;
+----------+---------------------+------+-----+---------+----------------+
| Field    | Type                | Null | Key | Default | Extra          |
+----------+---------------------+------+-----+---------+----------------+
| id       | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |
| username | varchar(20)         | NO   | UNI | NULL    |                |
| age      | tinyint(3) unsigned | YES  |     | NULL    |                |
+----------+---------------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> ALTER TABLE test12 ALTER age SET DEFAULT 18;
Query OK, 0 rows affected (0.04 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test12;
+----------+---------------------+------+-----+---------+----------------+
| Field    | Type                | Null | Key | Default | Extra          |
+----------+---------------------+------+-----+---------+----------------+
| id       | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |
| username | varchar(20)         | NO   | UNI | NULL    |                |
| age      | tinyint(3) unsigned | YES  |     | 18      |                |
+----------+---------------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> ALTER TABLE test12 ADD email VARCHAR(50);
Query OK, 0 rows affected (0.75 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test12;
+----------+---------------------+------+-----+---------+----------------+
| Field    | Type                | Null | Key | Default | Extra          |
+----------+---------------------+------+-----+---------+----------------+
| id       | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |
| username | varchar(20)         | NO   | UNI | NULL    |                |
| age      | tinyint(3) unsigned | YES  |     | 18      |                |
| email    | varchar(50)         | YES  |     | NULL    |                |
+----------+---------------------+------+-----+---------+----------------+
4 rows in set (0.01 sec)

mysql> ALTER TABLE test12 ALTER email SET DEFAULT '888888@qq.com';
Query OK, 0 rows affected (0.07 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test12;
+----------+---------------------+------+-----+---------------+----------------+
| Field    | Type                | Null | Key | Default       | Extra          |
+----------+---------------------+------+-----+---------------+----------------+
| id       | tinyint(3) unsigned | NO   | PRI | NULL          | auto_increment |
| username | varchar(20)         | NO   | UNI | NULL          |                |
| age      | tinyint(3) unsigned | YES  |     | 18            |                |
| email    | varchar(50)         | YES  |     | 888888@qq.com |                |
+----------+---------------------+------+-----+---------------+----------------+
4 rows in set (0.00 sec)

#删除默认值
mysql> --删除默认值

mysql> ALTER TABLE test12 ALTER age DROP DEFAULT;
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test12;
+----------+---------------------+------+-----+---------------+----------------+
| Field    | Type                | Null | Key | Default       | Extra          |
+----------+---------------------+------+-----+---------------+----------------+
| id       | tinyint(3) unsigned | NO   | PRI | NULL          | auto_increment |
| username | varchar(20)         | NO   | UNI | NULL          |                |
| age      | tinyint(3) unsigned | YES  |     | NULL          |                |
| email    | varchar(50)         | YES  |     | 888888@qq.com |                |
+----------+---------------------+------+-----+---------------+----------------+
4 rows in set (0.00 sec)

mysql> ALTER TABLE test12 ALTER email DROP DEFAULT;
Query OK, 0 rows affected (0.06 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test12;
+----------+---------------------+------+-----+---------+----------------+
| Field    | Type                | Null | Key | Default | Extra          |
+----------+---------------------+------+-----+---------+----------------+
| id       | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |
| username | varchar(20)         | NO   | UNI | NULL    |                |
| age      | tinyint(3) unsigned | YES  |     | NULL    |                |
| email    | varchar(50)         | YES  |     | NULL    |                |
+----------+---------------------+------+-----+---------+----------------+
4 rows in set (0.00 sec)

#添加主键
mysql> -- 添加主键

mysql> CREATE TABLE IF NOT EXISTS test13(
    -> id INT
    -> );
Query OK, 0 rows affected (0.32 sec)

mysql> DESC test13;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| id    | int(11) | YES  |     | NULL    |       |
+-------+---------+------+-----+---------+-------+
1 row in set (0.00 sec)

mysql> ALTER TABLE test13 ADD PRIMARY KEY(id);
Query OK, 0 rows affected (0.58 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test13;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| id    | int(11) | NO   | PRI | NULL    |       |
+-------+---------+------+-----+---------+-------+
1 row in set (0.00 sec)

mysql> CREATE TABLE IF NOT EXISTS test14(
    -> id INT,
    -> card CHAR(19),
    -> username VARCHAR(20) NOT NULL
    -> );
Query OK, 0 rows affected (0.42 sec)

mysql> DESC test14;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| id       | int(11)     | YES  |     | NULL    |       |
| card     | char(19)    | YES  |     | NULL    |       |
| username | varchar(20) | NO   |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> ALTER TABLE test14 ADD PRIMARY KEY(id,card);
Query OK, 0 rows affected (0.65 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test14;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| id       | int(11)     | NO   | PRI | NULL    |       |
| card     | char(19)    | NO   | PRI | NULL    |       |
| username | varchar(20) | NO   |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
3 rows in set (0.01 sec)

#删除主键
mysql> ALTER TABLE test13 DROP PRIMARY KEY;
Query OK, 0 rows affected (1.92 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test14;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| id       | int(11)     | NO   | PRI | NULL    |       |
| card     | char(19)    | NO   | PRI | NULL    |       |
| username | varchar(20) | NO   |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
3 rows in set (0.01 sec)

mysql> DESC test13;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| id    | int(11) | NO   |     | NULL    |       |
+-------+---------+------+-----+---------+-------+
1 row in set (0.00 sec)

mysql> ALTER TABLE test14 DROP PRIMARY KEY;
Query OK, 0 rows affected (0.79 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test14;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| id       | int(11)     | NO   |     | NULL    |       |
| card     | char(19)    | NO   |     | NULL    |       |
| username | varchar(20) | NO   |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> ALTER TABLE test14 ADD CONSTRAINT symbol PRIMARY KEY index_type(id);
Query OK, 0 rows affected (0.54 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test14;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| id       | int(11)     | NO   | PRI | NULL    |       |
| card     | char(19)    | NO   |     | NULL    |       |
| username | varchar(20) | NO   |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

#当主键同时拥有自曾长处理，先去自曾长，再删除主键
mysql> CREATE TABLE IF NOT EXISTS test15(
    -> id INT UNSIGNED KEY AUTO_INCREMENT
    -> );
Query OK, 0 rows affected (0.32 sec)

mysql> DESC test15;
+-------+------------------+------+-----+---------+----------------+
| Field | Type             | Null | Key | Default | Extra          |
+-------+------------------+------+-----+---------+----------------+
| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
+-------+------------------+------+-----+---------+----------------+
1 row in set (0.00 sec)

mysql> ALTER TABLE test15 MODIFY id INT UNSIGNED;
Query OK, 0 rows affected (0.96 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE test15 DROP PRIMARY KEY;
Query OK, 0 rows affected (0.74 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test15;
+-------+------------------+------+-----+---------+-------+
| Field | Type             | Null | Key | Default | Extra |
+-------+------------------+------+-----+---------+-------+
| id    | int(10) unsigned | NO   |     | NULL    |       |
+-------+------------------+------+-----+---------+-------+
1 row in set (0.01 sec)

####################################################################33

#添加唯一索引
mysql> -- 测试添加唯一索引
mysql> CREATE TABLE IF NOT EXISTS test16(
    -> id TINYINT UNSIGNED KEY AUTO_INCREMENT,
    -> card CHAR(19) NOT NULL,
    -> test VARCHAR(20) NOT NULL,
    -> test1 CHAR(32) NOT NULL
    -> );
Query OK, 0 rows affected (0.32 sec)

mysql> DESC test16;
+-------+---------------------+------+-----+---------+----------------+
| Field | Type                | Null | Key | Default | Extra          |
+-------+---------------------+------+-----+---------+----------------+
| id    | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |
| card  | char(19)            | NO   |     | NULL    |                |
| test  | varchar(20)         | NO   |     | NULL    |                |
| test1 | char(32)            | NO   |     | NULL    |                |
+-------+---------------------+------+-----+---------+----------------+
4 rows in set (0.00 sec)

mysql> ALTER TABLE test16 ADD UNIQUE(username);
ERROR 1072 (42000): Key column 'username' doesn't exist in table
mysql> ALTER TABLE test16 ADD UNIQUE(card);
Query OK, 0 rows affected (0.29 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test16;
+-------+---------------------+------+-----+---------+----------------+
| Field | Type                | Null | Key | Default | Extra          |
+-------+---------------------+------+-----+---------+----------------+
| id    | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |
| card  | char(19)            | NO   | UNI | NULL    |                |
| test  | varchar(20)         | NO   |     | NULL    |                |
| test1 | char(32)            | NO   |     | NULL    |                |
+-------+---------------------+------+-----+---------+----------------+
4 rows in set (0.01 sec)

mysql> SHOW CREATE TABLE test16;
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| test16 | CREATE TABLE `test16` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `card` char(19) NOT NULL,
  `test` varchar(20) NOT NULL,
  `test1` char(32) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `card` (`card`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> ALTER TABLE test16 ADD CONSTRAINT symbol UNIQUE INDEX uni_test(test);
Query OK, 0 rows affected (0.31 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> SHOW CREATE TABLE test16
    -> ;
+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                                                                                    |
+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| test16 | CREATE TABLE `test16` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `card` char(19) NOT NULL,
  `test` varchar(20) NOT NULL,
  `test1` char(32) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `card` (`card`),
  UNIQUE KEY `uni_card` (`card`),
  UNIQUE KEY `uni_test` (`test`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> ALTER TABLE test16 ADD test2 VARCHAR(30) NOT NULL;
Query OK, 0 rows affected (0.73 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE test16 ADD CONSTRAINT symbol UNIQUE INDEX mulUni_test2_test1(test1,test2);
Query OK, 0 rows affected (0.52 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> SHOW CREATE TABLE test16;
+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                                                                                                                                                                         |
+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| test16 | CREATE TABLE `test16` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `card` char(19) NOT NULL,
  `test` varchar(20) NOT NULL,
  `test1` char(32) NOT NULL,
  `test2` varchar(30) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `card` (`card`),
  UNIQUE KEY `uni_card` (`card`),
  UNIQUE KEY `uni_test` (`test`),
  UNIQUE KEY `mulUni_test2_test1` (`test1`,`test2`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

#删除唯一索引
mysql> -- 删除唯一索引

mysql> ALTER TABLE test16 DROP INDEX card;
Query OK, 0 rows affected (0.21 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE test16 DROP KEY uni_card;
Query OK, 0 rows affected (0.20 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE test16 DROP KEY mulUni_test2_test1;
Query OK, 0 rows affected (0.18 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> DESC test16;
+-------+---------------------+------+-----+---------+----------------+
| Field | Type                | Null | Key | Default | Extra          |
+-------+---------------------+------+-----+---------+----------------+
| id    | tinyint(3) unsigned | NO   | PRI | NULL    | auto_increment |
| card  | char(19)            | NO   |     | NULL    |                |
| test  | varchar(20)         | NO   | UNI | NULL    |                |
| test1 | char(32)            | NO   |     | NULL    |                |
| test2 | varchar(30)         | NO   |     | NULL    |                |
+-------+---------------------+------+-----+---------+----------------+
5 rows in set (0.00 sec)

mysql> SHOW CREATE TABLE test16;
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                                                    |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| test16 | CREATE TABLE `test16` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `card` char(19) NOT NULL,
  `test` varchar(20) NOT NULL,
  `test1` char(32) NOT NULL,
  `test2` varchar(30) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uni_test` (`test`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

#修改表的存储引擎
mysql> -- 修改表的存储引擎为MyISAM

mysql> ALTER TABLE test16 ENGINE=MyISAM;
Query OK, 0 rows affected (0.38 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> SHOW CREATE TABLE test16;
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                                                    |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| test16 | CREATE TABLE `test16` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `card` char(19) NOT NULL,
  `test` varchar(20) NOT NULL,
  `test1` char(32) NOT NULL,
  `test2` varchar(30) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uni_test` (`test`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> ALTER TABLE test16 ENGINE=INNODB;
Query OK, 0 rows affected (0.54 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> SHOW CREATE TABLE test16;
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table                                                                                                                                                                                                                                                                                    |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| test16 | CREATE TABLE `test16` (
  `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `card` char(19) NOT NULL,
  `test` varchar(20) NOT NULL,
  `test1` char(32) NOT NULL,
  `test2` varchar(30) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uni_test` (`test`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

#删除数据表
mysql> DROP TABLE test12;
Query OK, 0 rows affected (0.19 sec)

mysql> DROP TABLE IF EXISTS test12;
Query OK, 0 rows affected, 1 warning (0.00 sec)
```
